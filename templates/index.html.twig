{% extends "base.html.twig" %}

{% block title %}Accueil
{% endblock %}

{% block body %}

	<div class="page-header">
		<h1>Bienvenue sur Watson</h1>
		<p>Découvrez notre sélection de liens</p>
	</div>

	<!-- Search Form -->
	<div class="search-container mb-4">
		<form method="get" action="{{ path('app_home') }}" class="search-form">
			<div class="input-group">
				<input type="text" class="form-control" name="search" value="{{ search }}" placeholder="Rechercher par titre, description ou tags...">
				<button type="submit" class="btn btn-primary">
					<i class="bi bi-search"></i>
					Rechercher
				</button>
				{% if search %}
					<a href="{{ path('app_home') }}" class="btn btn-outline-secondary">
						<i class="bi bi-x"></i>
					</a>
				{% endif %}
			</div>
		</form>
		{% if search %}
			<div class="search-info mt-2">
				<small class="text-muted">
					<i class="bi bi-info-circle"></i>
					Recherche pour "<strong>{{ search }}</strong>" -
					{{ links|length }}
					résultat(s) trouvé(s)
				</small>
			</div>
		{% endif %}
	</div>

	{% if links|length > 0 %}
		<div class="cards-container">
			{% for link in links %}
				<div class="link-card" id="link-{{ link.id }}">
					<h5 class="card-title">
						<a href="{{ link.url }}" target="_blank" rel="noopener noreferrer">{{ link.title }}</a>
					</h5>
					<p class="text-muted">
						Partagé par
						{{ link.user.username }}
					</p>
					<p class="card-text">{{ link.desc }}</p>

					{% if link.tags is defined and link.tags|length > 0 %}
						<div class="link-tags">
							{% for tag in link.tags %}
								<span class="tag-badge">{{ tag.name }}</span>
							{% endfor %}
						</div>
					{% endif %}

					<div class="card-actions">
						<a href="{{ link.url }}" class="open-link-btn" target="_blank" rel="noopener noreferrer">
							Ouvrir le lien
						</a>
					</div>
				</div>
			{% endfor %}
		</div>
	{% else %}
		<div class="no-links">
			<h3>Aucun lien disponible pour le moment</h3>
			<p>Les liens ajoutés apparaîtront ici.</p>
		</div>
	{% endif %}
{% endblock %}
